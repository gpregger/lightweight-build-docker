FROM alpine:latest
RUN apk add --no-cache bash git pacman-makepkg curl tar zstd
RUN curl -L https://archlinux.org/packages/community/x86_64/pacman-contrib/download --output pacman-contrib.pkg.tar.zst \
    && tar --use-compress-program=unzstd -xvf pacman-contrib.pkg.tar.zst --exclude='.*' \
    && mkdir -p /etc/periodic/1min \
    && touch /etc/periodic/1min/test \
    && echo "#!/bin/bash" > /etc/periodic/1min/test \
    && echo "wall << End_Of_Message" >> /etc/periodic/1min/test \
    && echo "Test Broadcast." >> /etc/periodic/1min/test \
    && echo "End_Of_Message" >> /etc/periodic/1min/test

RUN chmod 0744 /etc/periodic/1min/test

CMD ["crond", "-f"]